<odoo>
    <data>
        <record id="view_project_project_gantt" model="ir.ui.view">
            <field name="name">project.project.gantt</field>
            <field name="model">project.project</field>
            <field name="arch" type="xml">
                <gantt date_start="date_start" date_stop="date" progress="progress_rate" string="Projects">
                </gantt>
            </field>
        </record>

        <record id="project.open_create_project" model="ir.actions.act_window">
            <field name="name">Create a Project</field>
            <field name="res_model">project.project</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="project.edit_project"/>
            <field name="target">current</field>
        </record>

        <record id="project.open_view_project_all" model="ir.actions.act_window">
            <field name="name">Projects</field>
            <field name="res_model">project.project</field>
            <field name="view_type">form</field>
            <field name="domain">[]</field>
            <field name="view_mode">kanban,form</field>
            <field name="search_view_id" ref="project.view_project_project_filter"/>
            <field name="target">main</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a new project.
                    <br/>
                    <i>Or <a type="action" name="%(project.activate_sample_project)d">activate a sample project</a> to
                        play with.
                    </i>
                </p>
            </field>
        </record>


        <record id="project.view_project" model="ir.ui.view">
            <field name="name">project.project.tree</field>
            <field name="model">project.project</field>
            <field name="field_parent">child_ids</field>
            <field name="arch" type="xml">
                <tree fonts="bold:message_unread==True"
                      colors="red:date and (date&lt;current_date) and (state == 'open');blue:state in ('draft','pending');grey: state in ('close','cancelled')"
                      string="Projects">
                    <field name="sequence" widget="handle"/>
                    <field name="message_unread" invisible="1"/>
                    <field name="date" invisible="1"/>
                    <field name="name" string="Project Name"/>
                    <field name="user_id" string="Project Manager"/>
                    <field name="partner_id" string="Contact"/>
                    <field name="parent_id" string="Parent" invisible="1"/>
                    <field name="planned_hours" widget="float_time"/>
                    <field name="total_hours" widget="float_time"/>
                    <field name="effective_hours" widget="float_time"/>
                    <field name="progress_rate" widget="progressbar"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="open_view_template_project" model="ir.actions.act_window">
            <field name="name">Templates of Projects</field>
            <field name="res_model">project.project</field>
            <field name="view_type">form</field>
            <field name="domain">[('state','=','template')]</field>
            <field name="view_id" ref="project.view_project"/>
        </record>


        <record id="view_task_work_form" model="ir.ui.view">
            <field name="name">project.task.work.form</field>
            <field name="model">project.task.work</field>
            <field name="arch" type="xml">
                <form string="Task Work">
                    <group col="4">
                        <field colspan="4" name="name"/>
                        <field name="hours" widget="float_time"/>
                        <field name="date"/>
                        <field name="user_id" options='{"no_open": True}'
                               context="{'default_groups_ref': ['base.group_user', 'base.group_partner_manager', 'base.group_partner_manager', 'project.group_project_user']}"/>
                        <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                    </group>
                </form>
            </field>
        </record>

        <record id="view_task_work_tree" model="ir.ui.view">
            <field name="name">project.task.work.tree</field>
            <field name="model">project.task.work</field>
            <field name="arch" type="xml">
                <tree editable="top" string="Task Work">
                    <field name="date"/>
                    <field name="name"/>
                    <field name="hours" widget="float_time"/>
                    <field name="user_id"
                           context="{'default_groups_ref': ['base.group_user', 'project.group_project_user']}"/>
                </tree>
            </field>
        </record>

        <!-- Task-->
        <record id="project.view_task_form2" model="ir.ui.view">
            <field name="name">project.task.form</field>
            <field name="model">project.task</field>
            <field eval="2" name="priority"/>
            <field name="arch" type="xml">
                <form string="Project">
                    <header>
                        <field name="stage_id" widget="statusbar" clickable="True"
                               options="{'fold_field': 'fold'}"/>
                    </header>
                    <sheet string="Task">
                        <div class="oe_right">
                            <field name="kanban_state" class="oe_inline" widget="kanban_state_selection"/>
                        </div>
                        <h1>
                            <field name="name" placeholder="Task summary..." class="oe_inline"/>
                        </h1>
                        <group>
                            <group>

                                <field name="user_id"
                                       options='{"no_open": True}'
                                       context="{'default_groups_ref': ['base.group_user', 'base.group_partner_manager', 'project.group_project_user']}"/>
                                <field name="reviewer_id"
                                       options='{"no_open": True}'
                                       context="{'default_groups_ref': ['base.group_user', 'base.group_partner_manager', 'project.group_project_user']}"/>
                                <!--on_change="onchange_planned(planned_hours, effective_hours)"-->
                                <field name="planned_hours" widget="float_time"
                                       groups="project.group_time_work_estimation_tasks"
                                />

                            </group>
                            <group>
                                <field name="date_deadline"/>
                                <field name="tag_ids" widget="many2many_tags"/>
                                <field name="progress" widget="progressbar"
                                       groups="project.group_time_work_estimation_tasks"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="Description">
                                <field name="description" placeholder="Add a Description..."/>
                                <!--groups="project.group_tasks_work_on_tasks"-->
                                <field name="work_ids">
                                    <tree string="Task Work" editable="top">
                                        <field name="name"/>
                                        <field name="hours" widget="float_time" sum="Spent Hours"/>
                                        <field name="date"/>
                                        <field name="user_id"
                                               context="{'default_groups_ref': ['base.group_user', 'base.group_partner_manager', 'project.group_project_user']}"/>
                                    </tree>
                                </field>
                                <group>
                                    <group class="oe_subtotal_footer oe_right" name="project_hours"
                                           groups="project.group_time_work_estimation_tasks">
                                        <field name="effective_hours" widget="float_time"/>
                                        <label for="remaining_hours" string="Remaining"
                                               groups="project.group_time_work_estimation_tasks"/>
                                        <div>
                                            <field name="remaining_hours" widget="float_time"
                                                   groups="project.group_time_work_estimation_tasks"/>
                                        </div>
                                        <field name="total_hours" widget="float_time"
                                               class="oe_subtotal_footer_separator"/>
                                    </group>
                                </group>
                                <div class="oe_clear"/>
                            </page>
                            <!--groups="group_delegate_task"-->
                            <page string="Delegation">
                                <button name="%(action_project_task_delegate)d" string="Delegate" type="action"/>
                                <separator string="Parent Tasks"/>
                                <field name="parent_ids"/>
                                <separator string="Delegated tasks"/>
                                <field name="child_ids">
                                    <tree string="Delegated tasks">
                                        <field name="name"/>
                                        <field name="user_id"/>
                                        <field name="stage_id"/>
                                        <field name="effective_hours" widget="float_time"/>
                                        <field name="progress" widget="progressbar"/>
                                        <field name="remaining_hours" widget="float_time"/>
                                        <field name="date_deadline"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Extra Info">
                                <group col="4">
                                    <field name="priority" groups="base.group_user" widget="priority"/>
                                    <field name="sequence"/>
                                    <field name="partner_id"/>
                                    <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                                </group>
                                <group>
                                    <group string="Gantt View">
                                        <field name="date_start"/>
                                        <field name="date_end"/>
                                    </group>
                                    <group>
                                        <field name="date_last_stage_update" groups="base.group_no_one"/>
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>


        <record id="project.view_task_tree2" model="ir.ui.view">
            <field name="name">project.task.tree</field>
            <field name="model">project.task</field>
            <field eval="2" name="priority"/>
            <field name="arch" type="xml">
                <tree fonts="bold:message_unread==True" colors="red:date_deadline and (date_deadline&lt;current_date)"
                      string="Tasks">
                    <field name="message_unread" invisible="1"/>
                    <field name="sequence" invisible="not context.get('seq_visible', False)"/>
                    <field name="name"/>
                    <field name="project_id" invisible="context.get('user_invisible', False)"/>
                    <field name="user_id" invisible="context.get('user_invisible', False)"/>
                    <field name="delegated_user_id" invisible="context.get('show_delegated', True)"/>
                    <field name="total_hours" invisible="1"/>
                    <field name="planned_hours" invisible="context.get('set_visible',False)"
                           groups="project.group_time_work_estimation_tasks"/>
                    <field name="effective_hours" widget="float_time" sum="Spent Hours" invisible="1"/>
                    <!--on_change="onchange_remaining(remaining_hours,planned_hours)"-->
                    <field name="remaining_hours" widget="float_time" sum="Remaining Hours"

                           invisible="context.get('set_visible',False)"
                           groups="project.group_time_work_estimation_tasks"/>
                    <field name="date_deadline" invisible="context.get('deadline_visible',True)"/>
                    <field name="stage_id" invisible="context.get('set_visible',False)"/>
                    <field name="date_start" groups="base.group_no_one"/>
                    <field name="date_end" groups="base.group_no_one"/>
                    <field name="progress" widget="progressbar" invisible="context.get('set_visible',False)"/>
                </tree>
            </field>
        </record>

        <record id="view_task_gantt" model="ir.ui.view">
            <field name="name">project.task.gantt</field>
            <field name="model">project.task</field>
            <field eval="2" name="priority"/>
            <field name="arch" type="xml">
                <gantt date_start="date_start" date_stop="date_end" progress="progress" string="Tasks"
                       default_group_by="project_id">
                </gantt>
            </field>
        </record>

        <record id="project_category_action" model="ir.actions.act_window">
            <field name="name">Tags</field>
            <field name="res_model">project.category</field>
            <field name="view_type">form</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to add a new tag.
                </p>
            </field>
        </record>

        <menuitem action="project_category_action" id="menu_project_category_act" parent="base.menu_definitions"
                  groups="base.group_no_one"/>

    </data>


</odoo>