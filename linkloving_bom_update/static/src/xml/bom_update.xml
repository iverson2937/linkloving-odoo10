<?xml version="1.0" encoding="UTF-8"?>

<templates xml:space="preserve">
    <t t-name="bom_wraper">
        <div class="panel-group" id="accordion">

        </div>
    </t>

    <t t-name="bom_tree">
        <button class="btn btn-primary bom_modify_submit">另存为</button>
        <button class="btn btn-primary bom_modify_direct">替换</button>
        <button class="btn btn-primary bom_back">返回</button>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" t-att-href="'#'+result.uuid" class="click_bom_tag_a">
                        <t t-if="result.bom_ids.length>0">
                            <span class="fa fa-caret-down open-sign"></span>
                        </t>
                    </a>
                    <span t-att-data-templ-id="result.product_tmpl_id" class="product_name">[<t t-esc="result.code"/>]<span><t t-esc="result.name"/></span></span>
                    <span style="margin-left:15px"><t t-esc="result.process_id"/></span>
                    <!--<span style="margin-left:30px;"><t t-esc="result.product_specs"/></span>-->
                    <t t-if="result.bom_ids.length>0">
                        <span style="margin-left:30px;cursor:pointer" class="fa fa-plus add_product"></span>
                    </t>
                </h4>
            </div>

            <div t-att-id="result.uuid" t-att-data-return-id="result.bom_id" class="panel-collapse collapse in">
                <div class="panel-body">
                    <t t-foreach="result.bom_ids" t-as="item">
                        <div class="panel panel-default">
                            <!--判断给不同的颜色-->
                            <t t-if="item.is_highlight==true">
                                <div class="panel-heading change_color">
                                    <t t-call="pro_detail">
                                        <t t-set="item" t-value="item"/>
                                    </t>
                                </div>
                            </t>
                            <t t-elif="item.is_highlight==false">
                                <div class="panel-heading">
                                    <t t-call="pro_detail">
                                        <t t-set="item" t-value="item"/>
                                    </t>
                                </div>
                            </t>

                            <div t-att-id="item.uuid" t-att-data-return-id="item.id" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <t t-if="item.bom_ids.length>0">
                                        <t t-foreach="item.bom_ids" t-as="items">
                                            <t t-call="more">
                                                <t t-set="arg" t-value="items"/>
                                            </t>
                                        </t>
                                    </t>
                                </div>
                            </div>
                        </div>
                    </t>
                </div>
            </div>
        </div>

        <div class="bom_review">
             <!--<t t-if="result.state != 'release'">-->
            <!--<button class="btn btn-primary bom_review_operate_btn">审核操作</button>-->
            <!--</t>-->
            <div class="bom_review_list">
                <t t-foreach="result.review_line" t-as="review_list">
                    <div data-toggle="tooltip" data-placement="top" t-att-title="'备注:'+review_list.remark+',审核结果：'+review_list.state[1]+'，时间：'+review_list.create_date"><t t-esc="review_list.name"/></div>
                    <t t-if="review_list.state[0]=='review_success'">
                        <span class="fa fa-long-arrow-right" data-toggle="tooltip" data-placement="top" t-att-title="'备注:'+review_list.remark+',审核结果：'+review_list.state[1]+'，时间：'+review_list.create_date"></span>
                    </t>
                    <t t-if="review_list.state[0]=='waiting_review'">
                        <span class="fa fa-long-arrow-right document_yellow" data-toggle="tooltip" data-placement="top" t-att-title="'备注:'+review_list.remark+',审核结果：'+review_list.state[1]+'，时间：'+review_list.create_date"></span>
                        <div data-toggle="tooltip" data-placement="top" t-att-title="'备注:'+review_list.remark+',审核结果：'+review_list.state[1]+'，时间：'+review_list.create_date">等待</div>
                    </t>
                     <t t-if="review_list.state[0]=='review_fail'||review_list.state[0]=='review_canceled'">
                        <span class="fa fa-long-arrow-right document_red" data-toggle="tooltip" data-placement="top" t-att-title="'备注:'+review_list.remark+',审核结果：'+review_list.state[1]+'，时间：'+review_list.create_date"></span>
                         <!--<div>审核不通过</div>-->
                    </t>
                </t>
                <t t-if="result.state == 'release'">
                     <div>已发布</div>
                </t>

            </div>
        </div>
    </t>

    <t t-name="more">
         <div class="panel panel-default">
            <t t-if="arg.is_highlight==true">
                <div class="panel-heading change_color">
                    <t t-call="pro_detail">
                        <t t-set="item" t-value="arg"/>
                    </t>
                </div>
            </t>
            <t t-elif="arg.is_highlight==false">
                <div class="panel-heading">
                    <t t-call="pro_detail">
                        <t t-set="item" t-value="arg"/>
                    </t>
                </div>
            </t>

            <div t-att-id="arg.uuid" t-att-data-return-id="arg.id" class="panel-collapse collapse">
                <div class="panel-body">
                    <t t-if="arg.bom_ids.length>0">
                        <t t-foreach="arg.bom_ids" t-as="items">
                            <t t-call="more">
                                <t t-set="arg" t-value="items"/>
                            </t>
                        </t>
                    </t>
                </div>
            </div>
         </div>
    </t>

    <t t-name="pro_detail">
        <h4 class="panel-title">
            <a data-toggle="collapse" t-att-href="'#'+item.uuid" class="click_bom_tag_a">
                <t t-if="item.bom_ids.length>0">
                    <span class="fa fa-caret-right open-sign"></span>
                </t>
            </a>
            <span t-att-data-templ-id="item.product_tmpl_id" t-att-data-id="item.product_id" t-att-data-product-id="item.id" class="product_name">[<t t-esc="item.code"/>]<span><t t-esc="item.name"/></span></span>
            <span style="margin-left:15px"><t t-esc="item.qty"/></span>
            <t t-if="item.process_id != false">
                <span style="margin-left:15px"><t t-esc="item.process_id"/></span>
            </t>
            <!--<span style="margin-left:30px;"><t t-esc="item.product_specs"/></span>-->
            <t t-if="item.bom_ids.length>0">
                <span style="margin-left:30px;cursor:pointer" class="fa fa-plus add_product"></span>
            </t>
            <!--<span class='fa fa-copy product_copy' style='margin-left: 15px'></span>-->
            <!--<button style="margin-left:15px" class="btn btn-primary product_edit">编辑</button>-->
            <span class="fa fa-edit product_edit" style="margin-left:15px;cursor:pointer"></span>
        </h4>
    </t>


</templates>