<?xml version="1.0" encoding="UTF-8"?>

<templates xml:space="preserve">


    <t t-name="approval_load_page">

        <div class="approval_page_container" style="top:60px;">

        </div>
    </t>
    <t t-name="approval_load_detail_file">
        <div class="approval_ul_wraper">
            <ul id="approval_tab" class="nav nav-tabs" data-now-tab="waiting_submit">
               <t t-set="i" t-value="1"/>
                <t t-foreach="result" t-as="item">
                    <li t-att-class="i ==1 ? 'active': ''">
                        <a t-att-href="'#'+item[0]" data-toggle="tab" class="tab_toggle_a" t-att-data="item[0]">
                             <t t-esc="item[1]"/>
                        </a>
                    </li>
                    <t t-set="i" t-value="2"/>
                </t>
            </ul>

            <!--<div class="create_document">-->
                <!--<button style="display:none;" class="btn btn-primary delect_hide download_document_checked">下载选中</button>-->
                <!--<button style="display:none;" class="btn btn-primary delect_hide approval_document_checked">审核选中</button>-->
            <!--</div>-->

        </div>

        <div id="myTabContent_Approval" class="tab-content">
            <t t-set="j" t-value="1"/>
            <t t-foreach="result" t-as="item">
                <div t-att-class=" j==1 ? 'tab-pane fade in active':'tab-pane fade'" t-att-id="item[0]">

                </div>
                <t t-set="j" t-value="2"/>
            </t>
        </div>
    </t>

    <t t-name="approval_tab_content">
         <script>
            $(function () { $("[data-toggle='tooltip']").tooltip(); });
        </script>
        <t t-foreach="result" t-as="item_files">
            <div class="tab_pane_display" t-att-data-id="item_files.id" t-att-data="item_files.type">
                <div class="tab_message_display">
                    <div class="approval_tab_pane_type"><t t-esc="item_files.type"/></div>

                    <!--<div>-->
                        <!--<input type="checkbox" class="o_chat_header_file" t-att-name="item_files.id">选中</input>-->
                    <!--</div>-->

                    <div>产品名字: <span t-att-product-id="item_files.product_id.id" t-att-default-code="item_files.product_id.default_code" class="approval_product_name"><t t-esc="item_files.product_id.name"/></span></div>
                    <div>文件：<span class="file_name"><t t-esc="item_files.file_name"/></span></div>
                    <!--<div>审核人：<span><t t-esc="item_files.review_id"/></span></div>-->
                    <t t-if="item_files.remote_path!=''">
                        <div>远程地址：<span class="remote_path"><t t-esc="item_files.remote_path"/></span></div>
                    </t>
                    <div>版本：<span class="version_span"><t t-esc="item_files.version"/></span></div>
                    <div>状态：<span><t t-esc="item_files.state[1]"/></span>
                        <t t-if="item_files.is_show_cancel">
                            <button class="btn btn-primary review_cancel">取消审核</button>
                        </t>
                    </div>
                    <!--<div>创建人：<span><t t-esc="item_files.create_uid_name"/></span></div>-->

                </div>
                <div class="document_review_list">
                    <t t-foreach="item_files.review_line" t-as="review_list">
                        <div data-toggle="tooltip" data-placement="top" t-att-title="'备注:'+review_list.remark+',审核结果：'+review_list.state[1]+'，时间：'+review_list.create_date"><t t-esc="review_list.name"/></div>
                        <t t-if="review_list.state[0]=='review_success'">
                            <span class="fa fa-long-arrow-right" data-toggle="tooltip" data-placement="top" t-att-title="'备注:'+review_list.remark+',审核结果：'+review_list.state[1]+'，时间：'+review_list.create_date"></span>
                        </t>
                        <t t-if="review_list.state[0]=='waiting_review'">
                            <span class="fa fa-long-arrow-right document_yellow" data-toggle="tooltip" data-placement="top" t-att-title="'备注:'+review_list.remark+',审核结果：'+review_list.state[1]+'，时间：'+review_list.create_date"></span>
                            <div data-toggle="tooltip" data-placement="top" t-att-title="'备注:'+review_list.remark+',审核结果：'+review_list.state[1]+'，时间：'+review_list.create_date">等待</div>
                        </t>
                         <t t-if="review_list.state[0]=='review_fail'||review_list.state[0]=='review_canceled'">
                            <span class="fa fa-long-arrow-right document_red" data-toggle="tooltip" data-placement="top" t-att-title="'备注:'+review_list.remark+',审核结果：'+review_list.state[1]+'，时间：'+review_list.create_date"></span>
                             <!--<div>审核不通过</div>-->
                        </t>
                    </t>

                    <t t-set="data_check" t-value="item_files.review_id ? false : true"/>

                    <t t-if="data_check">
                        <div data-toggle="tooltip" data-placement="top" t-att-title="'审核人提交'"><t t-esc="item_files.create_uid_name"/></div>
                        <span class="fa fa-long-arrow-right" data-toggle="tooltip" data-placement="top" t-att-title="'审核人提交'"></span>
                    </t>


                    <t t-if="item_files.state[0] == 'released'">
                         <div><t t-esc="item_files.state[1]" /></div>
                    </t>

                </div>
                <div class="document_btns">
                    <t t-if="item_files.has_right_to_review == true || item_files.is_first_review == true">
                        <button class="btn btn-primary document_manage_btn" t-att-data-suibian="item_files.is_show_action_deny" t-att-data-id="item_files.id">审核操作</button>
                    </t>
                    <t t-if="item_files.state[0] == 'draft' || item_files.state[0] == 'waiting_release'||item_files.state[0] == 'deny'||item_files.state[0]=='cancel' ">
                        <t t-if="item_files.type == 'Other' || item_files.type == 'Design'">
                            <a href="javascript:;" class="document_modify_wraper document_modify_2" >文件修改
                            </a>
                        </t>
                        <t t-else="">
                            <a href="javascript:;" class="document_modify_wraper">文件修改
                            <input type="file" class="document_modify"/>
                            </a>
                        </t>
                    </t>
                    <t t-if="item_files.is_able_to_use == true || approval_type=='waiting_submit' ||approval_type=='waiting_approval'">
                        <button class="btn btn-primary document_download" t-att-data="item_files.type">下载</button>
                    </t>


                    <a t-attf-href="/selectfile/file_show?id=#{item_files.id}"
                                               target="_blank"> <button class="btn btn-primary get_version_history">查看历史版本</button></a>


                    <!--&lt;!&ndash; Large modal &ndash;&gt;-->
                    <!--<button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-lg">Large modal</button>-->

                    <!--<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">-->
                    <!--<div class="modal-dialog modal-lg" role="document">-->
                    <!--<div class="modal-content">-->
                    <!--fffff-->
                    <!--</div>-->
                    <!--</div>-->
                    <!--</div>-->



                </div>
            </div>
        </t>
    </t>

</templates>