<?xml version="1.0" encoding="UTF-8"?>

<templates xml:space="preserve">


    <t t-name="approval_load_page">

        <div class="approval_page_container" style="top:60px;">

        </div>
    </t>

    <t t-name="approval_load_detail_file">
        <div class="approval_ul_wraper">
            <ul id="approval_tab" class="nav nav-tabs" data-now-tab="waiting_submit">
               <t t-set="i" t-value="1"/>
                <t t-foreach="result" t-as="item">
                    <t t-if="product_view_new_s==0">
                        <li t-att-class="i ==1 ? 'active': ''">
                            <a t-att-href="'#'+item[0]" data-toggle="tab" class="tab_toggle_a" t-att-data="item[0]">
                                 <t t-esc="item[1]"/>
                            </a>
                        </li>
                    </t>
                    <t t-set="i" t-value="2"/>
                </t>
            </ul>

            <div class="create_document">

                 <!--<div id="div_file_all_checkbox">-->
                <!--<button class="btn btn-primary document_all_checkbox" t-att-data="11">全选</button>-->
                <!--</div>-->

                <input type="checkbox" id="top_all_checkbox" class="document_all_checkbox">全选</input>

                <button class="btn btn-primary create_file_document_btn">创建</button>
                <button style="display:none;" id="download_checkbox" class="btn btn-primary delect_hide download_document_checked">批量下载</button>
                <button style="display:none;" id="document_checkbox" all_hello="nihaoya" class="btn btn-primary delect_hide document_manage_btn">批量送审</button>
                <button style="display:none;" id="delect_checkbox" class="btn btn-primary delect_hide delect_document_checked">批量删除</button>

            </div>

        </div>

        <div id="myTabContent_Approval" class="tab-content">
            <t t-set="j" t-value="1"/>
            <t t-foreach="result" t-as="item">
                <div t-att-class=" j==1 ? 'tab-pane fade in active':'tab-pane fade'" t-att-id="item[0]">

                </div>
                <t t-set="j" t-value="2"/>
            </t>
        </div>

        <div class="tabcontent_right">
            <!--<div class="my_collections">-->
            <!--<div class="coll_head">我的收藏</div>-->
            <!--<div class="coll_body">-->
            <!--<div>需要优先审核的</div>-->
            <!--<div>包装相关的文件们</div>-->
            <!--<div>设计部的文件们</div>-->
            <!--</div>-->
            <!--</div>-->

            <div class="documents_labels">
                <div class="labels_head">文件标签</div>
                <div class="labels_body">
                    <div data-id="all_type" class="search_tag_type_list">全部</div>

                    <t t-foreach="tag_type_list" t-as="item_tag">
                       <div t-att-data-id="item_tag.tag_name" t-att-class="'search_tag_type_list ' + item_tag.product_ax" t-att-data-name="item_tag.product_ax"><t t-esc="item_tag.tag_name"/><span style="float: right;"><t t-esc="item_tag.tag_num"/></span></div>
                    </t>

                </div>
            </div>
        </div>
    </t>

    <t t-name="approval_tab_content">
         <script>
            $(function () { $("[data-toggle='tooltip']").tooltip(); });
        </script>
        <t t-foreach="result" t-as="item_files">
            <div class="tab_pane_display" t-att-data-id="item_files.id" t-att-data="item_files.type">

                <t t-if="item_files.checkbox_type != 'submitted' ">
                    <div id="div_file_checkbox">
                        <input id="file_checkbox" type="checkbox" class="o_chat_header_file" t-att-name="item_files.id"></input>
                    </div>
                </t>

                <!--时间转换（加八小时）-->
                 <t t-js="ctx">
                        function change_time(date_planned){
                            date_planned = date_planned.replace(/\s/g,'T').replace(/\//g,'-');
                            var my_date = Date.parse(new Date(date_planned))
                            var newDate = new Date();
                            var time_offset = newDate.getTimezoneOffset() * 60000
                            var c_date = new Date(my_date - time_offset)
                            return moment(c_date).format('YYYY-MM-DD HH:mm:ss');
                        }
                        if (ctx.item_files.create_date){
                            ctx.item_files.create_date = change_time(ctx.item_files.create_date);
                        }
                 </t>

                <div class="tab_message_display">
                    <div>
                        <div class="approval_tab_pane_type"><t t-esc="item_files.type"/></div>
                        <div style="display:inline-block"> <span t-att-product-id="item_files.product_id.id" t-att-default-code="item_files.product_id.default_code" class="approval_product_name"><t t-esc="item_files.product_id.name"/></span></div>
                    </div>
                    <div t-att-data-id="item_files.id" class="item_second_line">
                        <span><t t-esc="item_files.create_uid_name"/></span>
                        <span><t t-esc="item_files.create_date"/></span>
                    </div>


                    <div class="item_third_line" t-att-data-id="item_files.id">
                        文件名称：<span t-att-data-id="item_files.id" class="file_name"><t t-esc="item_files.file_name"/></span>
                        <t t-if="item_files.file_is_update">
                            <span style="background: #e8c2bc;">已修改</span>
                        </t>
                    </div>
                    <!--<div>审核人：<span><t t-esc="item_files.review_id"/></span></div>-->
                    <t t-if="item_files.remote_path!=''">
                        <div t-att-data-id="item_files.id">远程地址：<span t-att-data-id="item_files.id" class="remote_path"><t t-esc="item_files.remote_path"/></span></div>
                    </t>

                    <div t-att-data-id="item_files.id" class="item_remark">
                        备注：<span t-att-data-id="item_files.id"><t t-esc="item_files.remark"/></span>
                    </div>

                    <!--<div class="row">-->
                    <!--<div class="col-md-6">版本：<span class="version_span"><t t-esc="item_files.version"/></span></div>-->
                    <!--<div class="col-md-6"> 创建日期：<span><t t-esc="item_files.create_date"/></span></div>-->
                    <!--</div>-->

                    <!--<div>状态：<span><t t-esc="item_files.state[1]"/></span>-->

                    <!--<t t-if="item_files.is_show_cancel">-->
                    <!--<button class="btn btn-primary review_cancel">取消审核</button>-->
                    <!--</t>-->

                    <!--</div>-->
                    <!--<div>创建人：<span><t t-esc="item_files.create_uid_name"/></span></div>-->
                </div>

                <!--每个item右边的部分-->
                <div class="item_right_content">
                    <div>
                        <span class="state"><t t-esc="item_files.state[1]"/></span>

                        <span class="reviewer" t-if="item_files.state[0] != 'released' ">
                            <t t-if="item_files.review_id">
                                <t t-esc="item_files.review_id"/>
                            </t>
                            <t t-else="">
                                <t t-esc="item_files.create_uid_name"/>
                            </t>
                        </span>

                        <!--<t t-if="not item_files.review_id">-->
                        <!--<span class="reviewer"><t t-esc="item_files.create_uid_name"/></span>-->
                        <!--</t>-->

                    </div>
                    <div>

                        <!--<button t-att-data-id="item_files.id" class="btn btn-default view_show_attachment_update_info_info">文件流程修改</button>-->

                        <t t-if="item_files.state[0] != 'released' &amp;&amp; item_files.is_product_view">
                            <t t-if="approval_type == 'waiting_submit' || approval_type == 'waiting_approval'">
                                <button t-att-data-info="item_files.id" t-att-data-id="item_files.tag_flow_id" class="btn btn-default view_show_attachment_update_info_info">添加审核人</button>
                            </t>
                        </t>

                        <t t-if="res_product_view_new == true">
                            <t t-if="item_files.state[0] == 'released' &amp;&amp; item_files.is_able_to_use== true">
                                <t t-if="item_files.is_show_outage == true ">
                                    <div class="document_download_new">
                                        <span class="document_download" t-att-data="item_files.tag_is_remote_path">下载</span><span></span>
                                    </div>
                               </t>
                            </t>
                        </t>
                        <t t-else="">
                             <t t-if="approval_type=='waiting_submit' || approval_type=='waiting_approval'">
                                <t t-if="item_files.is_show_outage == true">
                                    <div class="document_download_new">
                                        <span class="document_download" t-att-data="item_files.tag_is_remote_path">下载</span><span></span>
                                    </div>
                               </t>
                             </t>
                            <t t-if="item_files.state[0] == 'released'">
                                <t t-if="item_files.is_show_outage == true &amp;&amp; item_files.is_able_to_use== true">
                                    <div class="document_download_new">
                                        <span class="document_download" t-att-data="item_files.tag_is_remote_path">下载</span><span></span>
                                    </div>
                               </t>
                            </t>
                        </t>

                        <t t-if="item_files.has_right_to_review == true || item_files.is_first_review == true">
                            <div class="approval_btn">
                                <span class="document_manage_btn" t-att-data-suibian="item_files.is_show_action_deny" t-att-data-id="item_files.id" t-att-data-first="item_files.is_first_review">
                                    <t t-if="item_files.is_first_review == true">
                                        提交审核
                                    </t>
                                    <t t-else="">
                                        审核
                                    </t>
                                </span>
                            </div>
                        </t>
                        <div class="versions" style="text-align:right">
                            <span class="this_version">版本: V<span t-att-data-id="item_files.id" class="version_span"><t t-esc="item_files.version"/></span></span>
                            <a t-attf-href="/selectfile/file_show?id=#{item_files.id}&amp;type=#{item_files.type}"
                                                   target="_blank" style="display:inline-block"> <span class="get_version_history">查看历史版本</span></a>
                        </div>
                        <t t-if="item_files.is_show_cancel">
                            <button class="btn btn-default review_cancel">取消审核</button>
                        </t>


                        <t t-if="item_files.state[0] == 'draft' || item_files.state[0] == 'waiting_release'||item_files.state[0] == 'deny'||item_files.state[0]=='cancel' ">
                            <t t-if="item_files.is_delect_view =='yes' &amp;&amp;  item_files.is_show_outage == true ">

                                <button t-att-data-id="item_files.id" class="btn btn-default view_show_attachment_info_info">文件修改</button>


                                <!--<t t-if="item_files.type == 'Other' || item_files.type == 'Design'">-->
                                <!--<a href="javascript:;" class="document_modify_wraper document_modify_2" >文件修改11-->
                                <!--</a>-->
                                <!--&lt;!&ndash;<div class="document_modify_wraper document_modify_2">文件修改</div>&ndash;&gt;-->
                                <!--</t>-->
                                <!--<t t-else="">-->
                                <!--<div href="javascript:;" class="document_modify_wraper1">文件修改-->
                                <!--<input type="file" class="document_modify"/>-->
                                <!--</div>-->
                                <!--</t>-->


                            </t>
                        </t>


                        <t t-if="item_files.has_right_to_review == true || item_files.is_first_review == true">
                            <t t-if="item_files.is_delect_view =='yes'">
                                <t t-if="item_files.state[0] == 'waiting_release' || item_files.state[0] == 'deny' || item_files.state[0] == 'cancel'">
                                    <div class="delect_one_document" style="padding-top: 6px;">
                                        <button class="btn btn-default delect_document_checked">删除</button>
                                    </div>
                                </t>
                            </t>
                        </t>



                        <t t-if="item_files.state[0] == 'released' &amp;&amp; item_files.is_able_to_use== true">
                            <div class="stop_one_document" style="padding-top: 6px;">
                                 <t t-if="item_files.is_show_outage == true ">
                                     <button class="btn btn-default outage_document_file off" data="off" data-toggle="tooltip" data-placement="left" title="点击暂停使用">停用</button>
                                     <span style="color:red;">使用中</span>

                                 </t>


                                <t t-if="item_files.is_show_outage == false ">
                                    <t t-if="item_files.temp_is_show_stop_start == true">
                                    <button class="btn btn-default outage_document_file on" data="on" data-toggle="tooltip" data-placement="left" title="点击使用">启用</button>
                                    </t>
                                    <span style="color:red;">已停用</span>
                                 </t>


                            </div>
                        </t>



                    </div>
                </div>


                <div class="item_toggle">
                    <div class="get_more">查看更多<span class="fa fa-angle-down"></span></div>
                    <div class="toggle_approval_process_wrap">
                        <div class="top">
                            审批流程
                        </div>
                        <div class="item_approval_process_detail">
                            <div class="featurette">
                                <div class="">
                                    <div class="qa-message-list">

                                        <t t-foreach="item_files.review_line" t-as="review_list">
                                            <t t-js="ctx">
                                            function change_time(date_planned){

                                            date_planned = date_planned.replace(/\s/g,'T').replace(/\//g,'-');
                                            var my_date = Date.parse(new Date(date_planned))
                                            var newDate = new Date();
                                            var time_offset = newDate.getTimezoneOffset() * 60000
                                            var c_date = new Date(my_date - time_offset)
                                            return moment(c_date).format('YYYY-MM-DD HH:mm:ss');
                                            }
                                            if (ctx.review_list.create_date){
                                            ctx.review_list.create_date = change_time(ctx.review_list.create_date);
                                            }
                                            </t>

                                             <div t-att-class="'message-item ' + review_list.view_text_style">
                                                <div class="message-inner">
                                                    <div class="message-head clearfix">
                                                        <div class="user-detail">
                                                            <h5 class="handle"><t t-esc="review_list.name"/></h5>
                                                            <div class="post-meta">
                                                                <div t-att-class="'asker-meta ' + review_list.view_text_style">
                                                                    <div class="qa-message-when">

                                                                         <t t-if="review_list.create_date">
                                                                            <t t-esc="review_list.create_date"/>
                                                                        </t>
                                                                        <!--<t t-esc="review_list.create_date"/>-->
                                                                    </div>
                                                                    <div class="qa-message-who">
                                                                        <t t-esc="review_list.state[1]"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="qa-message-content">
                                                        <t t-esc="review_list.remark"/>
                                                        <t t-raw="review_list.remark_content"/>

                                                        <!--<p>asdasd<img src="http://localhost:8069/web/image/17535/image_medium" class="pull-left"/></p>-->

                                                   </div>
                                                </div>
                                             </div>

                                         </t>

                                        <div t-att-class="'message-item ' + item_files.view_text_style">
                                            <div class="message-inner">
                                                <div class="message-head clearfix">
                                                    <div class="user-detail">
                                                        <h5 class="handle"><t t-esc="item_files.create_uid_name"/></h5>
                                                        <div class="post-meta">
                                                            <!--<div class="asker-meta">-->
                                                            <div t-att-class="'asker-meta ' + item_files.view_text_style">
                                                                <div class="qa-message-when">
                                                                    <t t-esc="item_files.create_date"/>
                                                                </div>
                                                                <div class="qa-message-who">
                                                                    创建文件待提交
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--<div class="qa-message-content">-->
                                                <!--Mohtashim is an MCA from AMU (Aligarah) and a Project Management Professional. He has more than 17 years of experience in Telecom and Datacom industries covering complete SDLC. He is managing in-house innovations, business planning, implementation, finance and the overall business development of Tutorials Point.-->
                                                <!--</div>-->
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--<div class="document_review_list">-->
                <!--<t t-foreach="item_files.review_line" t-as="review_list">-->
                <!--<t t-js="ctx">-->
                <!--function change_time(date_planned){-->

                <!--date_planned = date_planned.replace(/\s/g,'T').replace(/\//g,'-');-->
                <!--var my_date = Date.parse(new Date(date_planned))-->
                <!--var newDate = new Date();-->
                <!--var time_offset = newDate.getTimezoneOffset() * 60000-->
                <!--var c_date = new Date(my_date - time_offset)-->
                <!--return moment(c_date).format('YYYY-MM-DD HH:mm:ss');-->
                <!--}-->
                <!--if (ctx.review_list.create_date){-->
                <!--ctx.review_list.create_date = change_time(ctx.review_list.create_date);-->
                <!--}-->
                <!--</t>-->

                <!--<div data-toggle="tooltip" data-placement="top" t-att-title="'备注:'+review_list.remark+',审核结果：'+review_list.state[1]+'，时间：'+review_list.create_date"><t t-esc="review_list.name"/></div>-->
                <!--<t t-if="review_list.state[0]=='review_success'">-->
                <!--<span class="fa fa-long-arrow-right document_yellow_dialog" data-toggle="tooltip" data-placement="top" t-att-title="'备注:'+review_list.remark+',审核结果：'+review_list.state[1]+'，时间：'+review_list.create_date"></span>-->
                <!--</t>-->
                <!--<t t-if="review_list.state[0]=='waiting_review'">-->

                <!--<span class="fa fa-long-arrow-right document_yellow document_yellow_dialog" data-toggle="tooltip" data-placement="top" t-att-title="'备注:'+review_list.remark+',审核结果：'+review_list.state[1]+'，时间：'+review_list.create_date"></span>-->
                <!--<div data-toggle="tooltip" data-placement="top" t-att-title="'备注:'+review_list.remark+',审核结果：'+review_list.state[1]+'，时间：'+review_list.create_date">等待</div>-->
                <!--</t>-->
                <!--<t t-if="review_list.state[0]=='review_fail'||review_list.state[0]=='review_canceled'">-->
                <!--<span class="fa fa-long-arrow-right document_red document_yellow_dialog" data-toggle="tooltip" data-placement="top" t-att-title="'备注:'+review_list.remark+',审核结果：'+review_list.state[1]+'，时间：'+review_list.create_date"></span>-->
                <!--&lt;!&ndash;<div>审核不通过</div>&ndash;&gt;-->
                <!--</t>-->
                <!--</t>-->

                <!--<t t-set="data_check" t-value="item_files.review_id ? false : true"/>-->

                <!--<t t-if="data_check">-->
                <!--<div data-toggle="tooltip" data-placement="top" t-att-title="'审核'"><t t-esc="item_files.create_uid_name"/></div>-->
                <!--<span class="fa fa-long-arrow-right" data-toggle="tooltip" data-placement="top" t-att-title="'审核'"></span>-->
                <!--</t>-->


                <!--<t t-if="item_files.state[0] == 'released'">-->
                <!--<div><t t-esc="item_files.state[1]" /></div>-->
                <!--</t>-->

                <!--</div>-->
                <!--<div class="document_btns">-->
                <!--<t t-if="item_files.has_right_to_review == true || item_files.is_first_review == true">-->
                <!--<button class="btn btn-primary document_manage_btn" t-att-data-suibian="item_files.is_show_action_deny" t-att-data-id="item_files.id">审核操作</button>-->
                <!--</t>-->
                <!--<t t-if="item_files.state[0] == 'draft' || item_files.state[0] == 'waiting_release'||item_files.state[0] == 'deny'||item_files.state[0]=='cancel' ">-->
                <!--<t t-if="item_files.is_delect_view =='yes' &amp;&amp;  item_files.is_show_outage == true ">-->
                <!--<t t-if="item_files.type == 'Other' || item_files.type == 'Design'">-->
                <!--<a href="javascript:;" class="document_modify_wraper document_modify_2" >文件修改-->
                <!--</a>-->
                <!--</t>-->
                <!--<t t-else="">-->
                <!--<a href="javascript:;" class="document_modify_wraper">文件修改-->
                <!--<input type="file" class="document_modify"/>-->
                <!--</a>-->
                <!--</t>-->
                <!--</t>-->
                <!--</t>-->
                <!--<t t-if="item_files.state[0] == 'released' || approval_type=='waiting_submit' ||approval_type=='waiting_approval'">-->
                <!--<t t-if="item_files.is_show_outage == true ">-->
                <!--<button class="btn btn-primary document_download" t-att-data="item_files.type">下载</button>-->
                <!--</t>-->
                <!--</t>-->


                <!--<a t-attf-href="/selectfile/file_show?id=#{item_files.id}&amp;type=#{item_files.type}"-->
                <!--target="_blank"> <button class="btn btn-primary get_version_history">查看历史版本</button></a>-->
                <!--<t t-if="item_files.has_right_to_review == true || item_files.is_first_review == true">-->
                <!--<t t-if="item_files.is_delect_view =='yes'">-->
                <!--<div class="delect_one_document" style="padding-top: 6px;">-->
                <!--<button class="btn btn-primary delect_document_checked">删除</button>-->
                <!--</div>-->
                <!--</t>-->
                <!--</t>-->

                <!--<t t-if="item_files.state[0] == 'released' ">-->

                <!--<div class="stop_one_document" style="padding-top: 6px;">-->
                <!--<t t-if="item_files.is_show_outage == true ">-->
                <!--<button class="btn btn-primary outage_document_file off" data="off" data-toggle="tooltip" data-placement="left" title="点击暂停使用">停用</button>-->
                <!--&lt;!&ndash;<span style="color:red;">使用中</span>&ndash;&gt;-->

                <!--</t>-->
                <!--<t t-if="item_files.is_show_outage == false ">-->
                <!--<button class="btn btn-primary outage_document_file on" data="on" data-toggle="tooltip" data-placement="left" title="点击使用">启用</button>-->
                <!--&lt;!&ndash;<span style="color:red;">已停用</span>&ndash;&gt;-->
                <!--</t>-->
                <!--</div>-->
                <!--</t>-->


                <!--&lt;!&ndash;&lt;!&ndash; Large modal &ndash;&gt;&ndash;&gt;-->
                <!--&lt;!&ndash;<button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-lg">Large modal</button>&ndash;&gt;-->

                <!--&lt;!&ndash;<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">&ndash;&gt;-->
                <!--&lt;!&ndash;<div class="modal-dialog modal-lg" role="document">&ndash;&gt;-->
                <!--&lt;!&ndash;<div class="modal-content">&ndash;&gt;-->
                <!--&lt;!&ndash;fffff&ndash;&gt;-->
                <!--&lt;!&ndash;</div>&ndash;&gt;-->
                <!--&lt;!&ndash;</div>&ndash;&gt;-->
                <!--&lt;!&ndash;</div>&ndash;&gt;-->


                <!--</div>-->
            </div>
        </t>
    </t>

</templates>