<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="view_leads_form" model="ir.ui.view">
            <field name="name">crm.lead.form.leads</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_case_form_view_leads"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='country_id']" position="after">
                    <field name="continent" placeholder="大洲"/>
                </xpath>
                <!--右-->
                <xpath expr="//field[@name='tag_ids']" position="after">
                    <field name="qq"/>
                </xpath>

                <xpath expr="//field[@name='qq']" position="after">
                    <field name="wechat"/>
                </xpath>

                <xpath expr="//field[@name='wechat']" position="after">
                    <field name="whatsapp"/>
                </xpath>

                <xpath expr="//field[@name='whatsapp']" position="after">
                    <field name="skype"/>
                </xpath>
                <xpath expr="//field[@name='skype']" position="after">
                    <field name="communication_identifier"/>
                </xpath>


                <!--左-->

                <xpath expr="//field[@name='team_id']" position="after">
                    <field name="crm_source_id" options="{'no_create': True}"/>
                </xpath>
                <xpath expr="//field[@name='crm_source_id']" position="after">
                    <field name="express_sample_record"/>
                </xpath>


                <!--<xpath expr="//field[@name='express_sample_record']" position="after">-->
                <!---->
                <!--</xpath>-->

                <xpath expr="//page[@name='extra']" position="after">
                    <page string="产品">
                        <field name="interested_in_product" domain="[('sale_ok','=',True)]"
                               context="{'search_default_filter_categ_id':1}"/>
                    </page>
                </xpath>


            </field>
        </record>


        <record model="ir.ui.view" id="view_remark_record_form">
            <field name="name">res.remark.record.form</field>
            <field name="model">crm.remark.record</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <group>
                                <field name="subject"/>
                                <field name="partner_id" options="{'no_create':True}"/>
                            </group>
                            <group>
                                <field name="real_time"/>
                            </group>
                            <field name="detail"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>


        <record id="view_remark_record_tree" model="ir.ui.view">
            <field name="name">res.remark.record.tree</field>
            <field name="model">crm.remark.record</field>
            <field name="arch" type="xml">
                <tree string="备注记录">
                    <field name="partner_id"/>
                    <field name="subject"/>
                    <field name="real_time"/>
                    <field name="detail"/>
                </tree>
            </field>
        </record>


        <!-- open activities related to given partner -->
        <record id="crm_remark_action_tree" model="ir.actions.act_window">
            <field name="name">Remark</field>
            <field name="res_model">crm.remark.record</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_partner_id':active_id}</field>
        </record>


        <record id="res_partner_view_record" model="ir.ui.view">
            <field name="name">res.partner.view.record</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="priority" eval="20"/>
            <field name="groups_id" eval="[(4, ref('sales_team.group_sale_salesman'))]"/>
            <field name="arch" type="xml">
                <div name="button_box" position="inside">
                    <button class="oe_stat_button" type="action" name="%(linkloving_crm.crm_remark_action_tree)d"
                            icon="fa-book">
                        <field string="记录" name="remark_count" widget="statinfo"/>
                    </button>
                </div>
            </field>
        </record>

        <!--crm.lead.source-->
        <record model="ir.ui.view" id="view_crm_lead_source_form">
            <field name="name">crm.lead.source.form</field>
            <field name="model">crm.lead.source</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <group>
                                <field name="name"/>
                            </group>
                            <field name="detail"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>


        <record id="view_crm_lead_source_tree" model="ir.ui.view">
            <field name="name">crm.lead.source.tree</field>
            <field name="model">crm.lead.source</field>
            <field name="arch" type="xml">
                <tree string="备注记录">
                    <field name="name"/>
                    <field name="detail"/>
                </tree>
            </field>
        </record>

        <record id="action_crm_lead_source" model="ir.actions.act_window">
            <field name="name">线索来源</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">crm.lead.source</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>

            <!--<field name="domain">-->
            <!--[('payment_type','=',2),('state','!=','draft')]-->
            <!--</field>-->
            <!--<field name="context">{'posted':True}</field>-->
            <!--<field name="view_ids" eval="[(5,0,0),-->
            <!--(0,0,{'view_mode':'tree', 'view_id': ref('account_payment_register_tree_sale')}),-->
            <!--(0,0,{'view_mode':'form', 'view_id': ref('account_receive_register_form')})]"/>-->
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click add source record.
                </p>
                <p>
                    No source Found!
                </p>
            </field>
        </record>


        <!--Receipt*-->
        <menuitem action="action_crm_lead_source"
                  id="menu_crm_lead_source"
                  parent="sales_team.menu_sale_config"
                  sequence="2" name="线索来源"/>


    </data>
</openerp>