<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="view_leads_form" model="ir.ui.view">
            <field name="name">crm.lead.form.leads</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_case_form_view_leads"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='country_id']" position="after">
                    <field name="continent" placeholder="大洲"/>
                </xpath>
                <!--右-->
                <xpath expr="//field[@name='tag_ids']" position="after">
                    <field name="qq"/>
                </xpath>

                <xpath expr="//field[@name='qq']" position="after">
                    <field name="wechat"/>
                </xpath>

                <xpath expr="//field[@name='wechat']" position="after">
                    <field name="whatsapp"/>
                </xpath>

                <xpath expr="//field[@name='whatsapp']" position="after">
                    <field name="skype"/>
                </xpath>
                <xpath expr="//field[@name='skype']" position="after">
                    <field name="communication_identifier"/>
                </xpath>


                <!--左-->

                <xpath expr="//field[@name='team_id']" position="after">
                    <field name="crm_source_id" options="{'no_create': True}" required="True"/>
                </xpath>
                <xpath expr="//field[@name='crm_source_id']" position="after">
                    <field name="express_sample_record"/>
                </xpath>


                <!--<xpath expr="//field[@name='express_sample_record']" position="after">-->
                <!---->
                <!--</xpath>-->

                <xpath expr="//page[@name='extra']" position="after">
                    <page string="产品" attrs="{'invisible': True}">
                        <field name="interested_in_product" domain="[('sale_ok','=',True)]" widget="list_new_view"
                               context="{'search_default_rteng':1,'search_default_filter_categ_id':1}"/>
                    </page>
                    <page string="产品">
                        <field name="product_series_ids"/>
                    </page>
                </xpath>


            </field>
        </record>


        <!--<record id="linkloving_crm_partner_tree" model="ir.ui.view">-->
        <!--<field name="name">res.partner.tree.crm</field>-->
        <!--<field name="model">res.partner</field>-->
        <!--<field name="inherit_id" ref="base.view_partner_tree"/>-->
        <!--<field name="arch" type="xml">-->

        <!--<xpath expr="//field[@name='display_name']" position="after">-->
        <!--<field name="priority" string="自己测试星级" widget="nmd"/>-->
        <!--</xpath>-->

        <!--</field>-->
        <!--</record>-->


        <record model="ir.ui.view" id="view_remark_record_form">
            <field name="name">res.remark.record.form</field>
            <field name="model">crm.remark.record</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <group>
                                <field name="subject"/>
                                <field name="partner_id" options="{'no_create':True}"/>
                            </group>
                            <group>
                                <field name="real_time"/>
                            </group>
                            <field name="detail"/>
                        </group>
                        <notebook>
                            <page string="产品">
                                <field name="product_visit_record"/>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>


        <record id="view_remark_record_tree" model="ir.ui.view">
            <field name="name">res.remark.record.tree</field>
            <field name="model">crm.remark.record</field>
            <field name="arch" type="xml">
                <tree string="备注记录">
                    <field name="partner_id"/>
                    <field name="subject"/>
                    <field name="real_time"/>
                    <field name="detail"/>
                </tree>
            </field>
        </record>


        <!-- open activities related to given partner -->
        <record id="crm_remark_action_tree" model="ir.actions.act_window">
            <field name="name">Remark</field>
            <field name="res_model">crm.remark.record</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'default_partner_id':active_id}</field>
        </record>


        <!--<record id="res_partner_view_record" model="ir.ui.view">-->
        <!--<field name="name">res.partner.view.record</field>-->
        <!--<field name="model">res.partner</field>-->
        <!--<field name="inherit_id" ref="base.view_partner_form"/>-->
        <!--<field name="priority" eval="20"/>-->
        <!--<field name="groups_id" eval="[(4, ref('sales_team.group_sale_salesman'))]"/>-->
        <!--<field name="arch" type="xml">-->
        <!--<div name="button_box" position="inside">-->
        <!--<button class="oe_stat_button" type="action" name="%(linkloving_crm.crm_remark_action_tree)d"-->
        <!--icon="fa-book">-->
        <!--<field string="记录" name="remark_count" widget="statinfo"/>-->
        <!--</button>-->
        <!--</div>-->
        <!--</field>-->
        <!--</record>-->

        <!--crm.lead.source-->
        <record model="ir.ui.view" id="view_crm_lead_source_form">
            <field name="name">crm.lead.source.form</field>
            <field name="model">crm.lead.source</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <group>
                                <field name="name"/>
                            </group>
                            <field name="detail"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>


        <record id="view_crm_lead_source_tree" model="ir.ui.view">
            <field name="name">crm.lead.source.tree</field>
            <field name="model">crm.lead.source</field>
            <field name="arch" type="xml">
                <tree string="备注记录">
                    <field name="name"/>
                    <field name="detail"/>
                </tree>
            </field>
        </record>

        <record id="action_crm_lead_source" model="ir.actions.act_window">
            <field name="name">线索来源</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">crm.lead.source</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click add source record.
                </p>
                <p>
                    No source Found!
                </p>
            </field>
        </record>


        <!--Receipt*-->
        <menuitem action="action_crm_lead_source"
                  id="menu_crm_lead_source"
                  parent="sales_team.menu_sales"
                  groups="sales_team.group_sale_manager"
                  sequence="2" name="线索来源"/>


        <!--crm.product.series-->
        <record model="ir.ui.view" id="view_crm_product_series_form">
            <field name="name">crm.product.series.form</field>
            <field name="model">crm.product.series</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <group>
                                <field name="name"/>
                            </group>
                            <field name="detail"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>


        <record id="view_crm_product_series_tree" model="ir.ui.view">
            <field name="name">crm.product.series.tree</field>
            <field name="model">crm.product.series</field>
            <field name="arch" type="xml">
                <tree string="产品系列">
                    <field name="name"/>
                    <field name="detail"/>
                </tree>
            </field>
        </record>

        <record id="action_crm_product_series" model="ir.actions.act_window">
            <field name="name">产品系列</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">crm.product.series</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click add product series.
                </p>
                <p>
                    No Series Found!
                </p>
            </field>
        </record>


        <!--Receipt*-->
        <menuitem action="action_crm_product_series"
                  id="menu_crm_action_product_series"
                  parent="sales_team.menu_sales"
                  groups="sales_team.group_sale_manager"
                  sequence="2" name="产品系列"/>


        <!--message.order.status-->
        <record model="ir.ui.view" id="view_message_order_status_form">
            <field name="name">message.order.status.form</field>
            <field name="model">message.order.status</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <group>
                                <field name="name"/>
                            </group>
                            <field name="description"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>


        <record id="view_message_order_status_tree" model="ir.ui.view">
            <field name="name">message.order.status.tree</field>
            <field name="model">message.order.status</field>
            <field name="arch" type="xml">
                <tree string="客户状态">
                    <field name="name"/>
                    <field name="description"/>
                </tree>
            </field>
        </record>

        <record id="action_message_order_status" model="ir.actions.act_window">
            <field name="name">客户状态</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">message.order.status</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click add customer status.
                </p>
                <p>
                    No source Found!
                </p>
            </field>
        </record>

        <record id="crm_sale_action_partner_form" model="ir.actions.act_window">
            <field name="name">潜在客户</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="domain">
                [('customer','=','1'),('is_company','=',True),('is_order','=',False),('public_partners','!=','public')]
            </field>
            <field name="context">{'default_customer':True,'default_is_company':True}</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="base.view_res_partner_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to add a contact in your address book.
                </p>
                <p>
                    Odoo helps you easily track all activities related to
                    a customer; discussions, history of business opportunities,
                    documents, etc.
                </p>
            </field>
        </record>


        <record id="crm_public_partner_form" model="ir.actions.act_window">
            <field name="name">公海客户</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="domain">[('customer','=','1'),('is_company','=',True),('public_partners','=','public')]</field>
            <field name="context">{'default_customer':True,'default_is_company':True}</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="base.view_res_partner_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to add a contact in your address book.
                </p>
                <p>
                    Odoo helps you easily track all activities related to
                    a customer; discussions, history of business opportunities,
                    documents, etc.
                </p>
            </field>
        </record>


        <menuitem action="crm_sale_action_partner_form"
                  id="menu_message_order_status_id"
                  parent="sales_team.menu_sales"
                  groups=""
                  sequence="1" name="潜在客户"/>


        <!--&lt;!&ndash;Receipt*&ndash;&gt;-->
        <menuitem action="crm_public_partner_form"
                  id="menu_public_partner_id"
                  parent="sales_team.menu_sales"
                  groups=""
                  sequence="2" name="公海客户"/>


        <menuitem action="action_message_order_status"
                  id="menu_message_order_status"
                  parent="sales_team.menu_sales"
                  groups="sales_team.group_sale_manager"
                  sequence="3" name="客户状态"/>


        <record model="ir.ui.view" id="mail.view_message_form">
            <field name="name">mail.message.form</field>
            <field name="model">mail.message</field>
            <field name="priority">20</field>
            <field name="arch" type="xml">
                <form string="Message" create="false">
                    <sheet>
                        <group>
                            <group>
                                <field name="sale_order_type" invisible="1"/>
                                <field name="date" invisible="1"/>
                                <field name="email_from" invisible="1"/>
                                <field name="author_id" invisible="1"/>
                                <field name="record_name" invisible="1"/>
                            </group>
                            <group>
                                <field name="messages_label_ids" string="记录类型" widget="many2many_checkboxes"
                                       options="{'no_create': True}"
                                       attrs="{'invisible': [('sale_order_type','in',('inspection','question','partner_question'))]}"/>
                                <field name="parent_id" invisible="1"/>
                                <field name="model" invisible="1"/>
                                <field name="res_id" invisible="1"/>
                                <field name="message_type" invisible="1"/>
                                <field name="subtype_id" invisible="1"/>
                            </group>
                        </group>
                        <group>
                            <field name="subject"/>
                            <field name="solution"
                                   attrs="{'invisible': [('sale_order_type','not in',('inspection','question','partner_question'))]}"/>
                            <field name="measure"
                                   attrs="{'invisible': [('sale_order_type','not in',('inspection','question','partner_question'))]}"/>
                            <field name="anticipated_loss"
                                   attrs="{'invisible': [('sale_order_type','not in',('inspection','question','partner_question'))]}"/>
                            <field name="attachment_ids" attrs="{'invisible': [('attachment_ids','=',[])]}">
                                <tree create="0">
                                    <field name="name"/>
                                </tree>
                            </field>
                        </group>
                        <notebook>
                            <page string="问题描述">
                                <field name="body" options="{'style-inline': true}"/>
                            </page>

                            <page string="责任人"
                                  attrs="{'invisible': [('sale_order_type','not in',('inspection','question','partner_question'))]}">
                                <field name="person_in_charge_ids">
                                    <tree>
                                        <field name="person_in_charge"/>
                                        <field name="person_in_charge_proportion"/>
                                    </tree>
                                </field>
                            </page>

                        </notebook>
                        <group>
                            <field name="postil" string="批注" placeholder="批注..."
                                   attrs="{'invisible': [('sale_order_type','in',('inspection','question','partner_question'))]}"/>
                        </group>
                    </sheet>

                    <footer>
                        <button string="修改" name="update_message_action" type="object" class="btn-primary" groups=""/>
                        <!--<button string="修改" type="button" class="btn btn-sm btn-primary o_composer_button_sendss"/>-->
                        <button string="取消" class="btn-default" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>


        <record id="product_template_search_view_website_crm" model="ir.ui.view">
            <field name="name">product.template.search.published</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_search_view"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='consumable']" position="after">
                    <separator/>
                    <filter string="RT-ENG" name="rteng" domain="[('name','ilike', 'RT-ENG')]"/>
                    <filter string="RT-CN" name="rtcn" domain="[('name','ilike', 'RT-CN')]"/>
                    <separator/>
                    <filter string="库存不足" domain="[('product_insufficient','=',True)]"/>
                    <separator/>
                </xpath>
            </field>
        </record>


        <record model="ir.ui.view" id="mail.view_message_tree">
            <field name="name">mail.message.tree</field>
            <field name="model">mail.message</field>
            <field name="priority">20</field>
            <field name="arch" type="xml">
                <tree string="Messages" create="false">
                    <field name="date" widget="date"/>
                    <field name="subject" string="关联的订单" invisible="1"/>
                    <field name="compyter_body"/>
                    <field name="attachment_ids"/>
                    <field name="author_id"/>
                    <field name="solution"/>
                    <field name="measure"/>
                    <field name="anticipated_loss"/>
                    <field name="person_in_charge_ids"/>
                </tree>
            </field>
        </record>

    </data>
</openerp>