<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>


        <record id="action_orders_to_shipping_salesteams" model="ir.actions.act_window">
            <field name="name">Sales Orders</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.order</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="search_view_id" ref="sale.sale_order_view_search_inherit_sale"/>
            <field name="domain">[('state', '=', 'sale'),('shipping_status','!=','done')]</field>
            <field name="context">{
                'search_default_team_id': [active_id],
                'default_team_id': active_id,
                }
            </field>
        </record>

        <record id="action_orders_draft_salesteams" model="ir.actions.act_window">
            <field name="name">Sales Orders</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.order</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="search_view_id" ref="sale.sale_order_view_search_inherit_sale"/>
            <field name="domain">[('state', '=', 'draft')]</field>
            <field name="context">{
                'search_default_team_id': [active_id],
                'default_team_id': active_id,
                }
            </field>
        </record>


        <record id="action_account_invoice_salesteams" model="ir.actions.act_window">
            <field name="name">未结对账单</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="domain">[('state', 'not in', ('cancel','paid'))]</field>
            <field name="context">{
                'search_default_team_id': [active_id],
                'default_team_id': active_id,
                }
            </field>
        </record>


        <!-- Case Teams Action -->
        <record id="sales_team.crm_team_salesteams_act" model="ir.actions.act_window">
            <field name="name">Dashboard</field>
            <field name="res_model">crm.team</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,form</field>
            <field name="domain">[('is_show','=',True)]</field>
            <field name="context">{}</field>
            <field name="view_id" ref="sales_team.crm_team_salesteams_search"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click here to define a new sales team.
                </p>
                <p>
                    Use sales team to organize your different salespersons or
                    departments into separate teams. Each team will work in
                    its own list of opportunities.
                </p>
            </field>
        </record>


        <record id="crm_team_salesteams_view_kanban" model="ir.ui.view">
            <field name="name">crm.team.kanban</field>
            <field name="model">crm.team</field>
            <field name="inherit_id" ref="sales_team.crm_team_salesteams_view_kanban"/>
            <field name="arch" type="xml">
                <data>

                    <xpath expr="//div[contains(@class, 'o_kanban_primary_left')]" position="replace">

                        <div class="col-xs-6 o_kanban_primary_left" name="to_replace_in_sale_crm">
                            <button class="btn btn-primary oe_kanban_action oe_kanban_action_button"
                                    name="%(sale.action_quotation_form)d"
                                    type="action">新建
                            </button>
                        </div>


                    </xpath>
                    <!--<xpath expr="//a[@name='%(crm.action_report_crm_opportunity_salesteam)d']" position="attributes">-->
                    <!--<attribute name="invisible">1</attribute>-->


                    <!--</xpath>-->
                    <!--<xpath expr="//a[@name='%(crm.crm_activity_report_action_team)d']" position="attributes">-->
                    <!--<attribute name="invisible">1</attribute>-->

                    <!--</xpath>-->



                    <xpath expr="//div[contains(@class, 'o_kanban_primary_right')]" position="inside">

                        <div class="row mb4" t-if="record.use_invoices.raw_value">
                            <div class="col-xs-8">
                                <a name="%(action_orders_draft_salesteams)d" type="action">
                                    报价单
                                </a>
                            </div>
                            <div class="col-xs-4 text-right">
                                <field name="draft_orders_count"/>
                            </div>
                        </div>
                        <div class="row mb4" t-if="record.use_invoices.raw_value">
                            <div class="col-xs-8">
                                <a name="%(action_orders_to_shipping_salesteams)d" type="action">
                                    待发货销售单
                                </a>
                            </div>
                            <div class="col-xs-4 text-right">
                                <field name="orders_to_ship_count"/>
                            </div>
                        </div>

                        <div class="row mb4" t-if="record.use_invoices.raw_value">
                            <div class="col-xs-8">
                                <a name="%(action_account_invoice_salesteams)d" type="action">
                                    未结对账单
                                </a>
                            </div>
                            <div class="col-xs-4 text-right">
                                <field name="invoice_amount"/>
                            </div>
                        </div>

                        <!--<div class="row mb4" t-if="record.use_invoices.raw_value">-->
                            <!--<div class="col-xs-8">-->
                                <!--<a name="%(sale.action_orders_to_invoice_salesteams)d" type="action">-->
                                    <!--待对账销售单-->
                                <!--</a>-->
                            <!--</div>-->
                            <!--<div class="col-xs-4 text-right">-->
                                <!--<field name="sales_to_invoice_count"/>-->
                            <!--</div>-->
                        <!--</div>-->
                    </xpath>
                </data>
            </field>
        </record>


    </data>
</openerp>