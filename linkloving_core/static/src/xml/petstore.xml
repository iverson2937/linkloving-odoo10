<?xml version="1.0" encoding="UTF-8"?>

<templates xml:space="preserve">
    <t t-name="HomePage">
        <div class="panel-group" id="accordion">

        </div>
    </t>


    <t t-name="show_bom_line_tr">
        <button class="refresh_tree btn btn-primary" style="margin-bottom:30px;margin-right:100px;float:right;"><span class="fa fa-refresh open-sign"></span>   刷新</button>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" class="click_tag_a" data-level="true"
                       href="#name">
                       <span class="fa fa-caret-down open-sign"></span>
                       <!--<span class="show_bom_line_two">[需求:<t t-esc="result.require"/>,库存:<t t-esc="result.stock"/>,在产:<t t-esc="result.on_produce"/>,草稿:<t t-esc="result.draft"/>]</span>-->
                    </a>
                    [<t t-esc="result.part_no"/> ]
                    <span class="product_name" t-att-data-id="result.product_id" style="cursor:pointer"><t t-esc="result.name"/></span>
                    <span class="show_bom_line_one" style="margin-left:15px">
                         [
                            <t t-if="result.type">
                                  <t t-esc="result.type"/>
                            </t>/
                            <t t-if="result.service">
                                 <!--<t t-esc="service[result.service]"/>-->
                                <t t-esc="result.service"/>
                            </t>/
                            <t t-if="result.process">
                                <t t-esc="result.process"/>
                            </t>
                          ]
                    </span>
                </h4>
            </div>
            <div id="name" class="panel-collapse collapse in">
                <div class="panel-body">
                    <t t-if="result.process">
                        <div class="panel panel-info">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <input type="checkbox" name="chk_all_mo" t-att-id="'chk_mo'+result.product_id" class="chk_all_mo"/>
                                    <a data-toggle="collapse" data-parent="#name" t-att-href="'#mo'+result.product_id" class="click_mo_a">
                                        <t t-if="mo_length>0">
                                            <span class="fa fa-caret-right open-sign"></span>
                                        </t>
                                    </a>
                                    MO[<t t-esc="mo_length"/>]
                                    <span class="show_bom_line_two">[需求:<t t-esc="result.require"/>,库存:<t t-esc="result.stock"/>,在产:<t t-esc="result.on_produce"/>,草稿:<t t-esc="result.draft"/>]</span>
                                    <button class="btn btn-primary send-mo-btn" t-att-check-name="'chk_mo'+result.product_id">合并</button>
                                </h4>
                            </div>
                            <t t-if="mo_length!=0">
                                <div t-att-id="'mo'+result.product_id" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <t t-foreach="result.mo_ids" t-as="item">
                                            <div class="panel panel-success">
                                                <div class="panel-heading">
                                                    <h4 class="panel-title">
                                                        <input type="checkbox" t-att-name="'chk_mo'+result.product_id" t-att-mo-id="item.id" />
                                                        <a data-toggle="collapse" t-att-data-more-mo="item.id" data-parent="#name" t-att-data-origin="item.origin" t-att-href="'#mo_detail'+item.id" class="click_mo_detail_a" t-att-data-mo-id="item.product_id">
                                                            <t t-if="item.origin!=false">
                                                                <span class="fa fa-caret-right open-sign po_details"></span>
                                                            </t>
                                                        </a>
                                                        <span class="show_mo_number" t-att-data-id="item.id" style="cursor: pointer;"><t t-esc="item.name"/> </span>
                                                        <span style="margin-left:15px"><t t-esc="item.date"/> </span>
                                                        <span style="margin-left:15px"><t t-esc="item.state"/> </span>
                                                        <span style="margin-left:15px"><t t-esc="item.qty"/> </span>
                                                        <!--<span style="margin-left:15px"><t t-esc="item.origin"/> </span>-->
                                                    </h4>
                                                </div>
                                                <div class="panel-collapse collapse" t-att-id="'mo_detail'+item.id">
                                                    <div class="panel-body">

                                                    </div>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </t>

                    <t t-foreach="bom_lines" t-as="item">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" data-parent="#name" t-att-data-level="item.level" t-att-href="'#'+item.product_id" class="click_tag_a" t-att-data-product-id="item.product_id">
                                        <t t-if="item.level">
                                            <span class="fa fa-caret-right open-sign"></span>
                                        </t>
                                       <!--<span class="show_bom_line_two">[需求:<t t-esc="item.require"/>,库存:<t t-esc="item.stock"/>,在产:<t t-esc="item.on_produce"/>,草稿:<t t-esc="item.draft"/>]</span>-->
                                    </a>
                                    [<t t-esc="item.part_no"/> ]
                                    <span class="product_name" t-att-data-id="item.product_id" style="cursor:pointer"><t t-esc="item.name"/></span>
                                    <span class="show_bom_line_one" style="margin-left:15px">
                                            [
                                            1:<t t-esc="item.product_qty"/>
                                            ]
                                             [
                                            <t t-if="item.type">
                                                <t t-esc="item.type"/>
                                            </t>/
                                            <t t-if="item.service">
                                                 <t t-esc="item.service"/>
                                                <!--<t t-esc="service[item.service]"/>-->
                                            </t>/
                                            <t t-if="item.process">
                                                  <t t-esc="item.process"/>
                                            </t>
                                             ]
                                    </span>
                                </h4>
                            </div>
                            <!--<t t-if="item.level">-->
                                <div t-att-id="item.product_id" class="panel-collapse collapse">
                                    <div class="panel-body">

                                    </div>
                                </div>
                            <!--</t>-->
                        </div>
                    </t>

                    <t t-if="result.purchase_ok">
                        <div class="panel panel-warning">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <!--<input type="checkbox" name="chk_all" t-att-id="'chk'+result.product_id" class="chk_all"/>-->
                                    <a data-toggle="collapse" data-parent="#name" t-att-href="'#po'+result.product_id" class="click_po_a">
                                        <t t-if="po_length>0">
                                            <span class="fa fa-caret-right open-sign"></span>
                                        </t>
                                    </a>
                                    PO[<t t-esc="po_length"/>]
                                    <span class="show_bom_line_two">[需求:<t t-esc="result.require"/>,库存:<t t-esc="result.stock"/>,在产:<t t-esc="result.on_produce"/>,草稿:<t t-esc="result.draft"/>]</span>
                                    <!--<button class="btn btn-primary send-po-btn">合并</button>-->
                                </h4>
                            </div>
                            <t t-if="po_length!=0">
                                <div t-att-id="'po'+result.product_id" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <t t-foreach="result.po_lines" t-as="item">
                                            <div class="panel panel-success">
                                                <div class="panel-heading">
                                                    <h4 class="panel-title">
                                                       <!--<input type="checkbox" t-att-name="'chk'+result.product_id" t-att-po-id="item.id" />-->
                                                        <a data-toggle="collapse" data-parent="#name" t-att-href="'#po_detail'+item.line_id" class="click_po_detail_a" t-att-data-po-id="item.line_id">
                                                            <t t-if="item.origin!=false">
                                                                <span class="fa fa-caret-right open-sign po_details"></span>
                                                            </t>
                                                        </a>
                                                        <span class="show_po_number" t-att-data-id="item.id" style="cursor: pointer;"><t t-esc="item.name"/> </span>
                                                        <span style="margin-left:15px"><t t-esc="item.qty"/> </span>
                                                        <span style="margin-left:15px"><t t-esc="item.state"/> </span>
                                                        <span style="margin-left:15px"><t t-esc="item.date_planned"/> </span>
                                                    </h4>
                                                </div>
                                                <div class="panel-collapse collapse" t-att-id="'po_detail'+item.line_id">
                                                    <div class="panel-body">

                                                    </div>
                                                </div>

                                            </div>
                                        </t>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </t>

                </div>
            </div>
        </div>
    </t>



    <t t-name="show_bom_line_tr_add">
        <div class="panel panel-default">
            <div id="name" class="panel-collapse collapse in">
                <div class="panel-body">
                    <t t-if="result.process">
                        <div class="panel panel-info">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <input type="checkbox" name="chk_all_mo" t-att-id="'chk_mo'+result.product_id" class="chk_all_mo"/>
                                    <a data-toggle="collapse" data-parent="#name" t-att-href="'#mo'+result.product_id" class="click_mo_a">
                                        <t t-if="mo_length>0">
                                            <span class="fa fa-caret-right open-sign"></span>
                                        </t>
                                    </a>
                                    MO[<t t-esc="mo_length"/>]
                                        <span class="show_bom_line_two">[需求:<t t-esc="result.require"/>,库存:<t t-esc="result.stock"/>,在产:<t t-esc="result.on_produce"/>,草稿:<t t-esc="result.draft"/>]</span>
                                    <button class="btn btn-primary send-mo-btn" t-att-check-name="'chk_mo'+result.product_id">合并</button>
                                </h4>
                            </div>
                            <t t-if="mo_length!=0">
                                <div t-att-id="'mo'+result.product_id" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <t t-foreach="result.mo_ids" t-as="item">
                                            <div class="panel panel-success">
                                                <div class="panel-heading">
                                                    <h4 class="panel-title">
                                                        <input type="checkbox" t-att-name="'chk_mo'+result.product_id" t-att-mo-id="item.id"/>
                                                        <a data-toggle="collapse" data-parent="#name" t-att-data-more-mo="item.id" t-att-href="'#mo_detail'+item.id" t-att-data-origin="item.origin" class="click_mo_detail_a" t-att-data-mo-id="item.product_id">
                                                            <t t-if="item.origin!=false">
                                                                <span class="fa fa-caret-right open-sign po_details"></span>
                                                            </t>
                                                        </a>
                                                        <span class="show_mo_number" t-att-data-id="item.id" style="cursor: pointer;"><t t-esc="item.name"/> </span>
                                                        <span style="margin-left:15px"><t t-esc="item.date"/> </span>
                                                        <span style="margin-left:15px"><t t-esc="item.state"/> </span>
                                                        <span style="margin-left:15px"><t t-esc="item.qty"/> </span>
                                                        <!--<span style="margin-left:15px"><t t-esc="item.origin"/> </span>-->
                                                    </h4>
                                                </div>
                                                <div class="panel-collapse collapse" t-att-id="'mo_detail'+item.id">
                                                    <div class="panel-body">

                                                    </div>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </t>


                    <t t-foreach="bom_lines" t-as="item">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" data-parent="#name" t-att-data-level="item.level" t-att-href="'#'+item.product_id" class="click_tag_a" t-att-data-product-id="item.product_id">
                                        <t t-if="item.level">
                                            <span class="fa fa-caret-right open-sign"></span>
                                        </t>

                                       <!--<span class="show_bom_line_two">[需求:<t t-esc="item.require"/>,库存:<t t-esc="item.stock"/>,在产:<t t-esc="item.on_produce"/>,草稿:<t t-esc="item.draft"/>]</span>-->
                                    </a>
                                    [<t t-esc="item.part_no"/> ]

                                    <span class="product_name" t-att-data-id="item.product_id" style="cursor:pointer"><t t-esc="item.name"/></span>
                                    <span class="show_bom_line_one" style="margin-left:15px">
                                         [
                                        1:<t t-esc="item.product_qty"/>
                                        ]
                                         [
                                        <t t-if="item.type">
                                              <t t-esc="item.type"/>
                                        </t>/
                                        <t t-if="item.service">
                                            <t t-esc="item.service"/>
                                             <!--<t t-esc="service[item.service]"/>-->
                                        </t>/
                                        <t t-if="item.process">
                                              <t t-esc="item.process"/>
                                        </t>
                                         ]
                                    </span>
                                </h4>
                            </div>
                            <!--<t t-if="item.level">-->
                                <div t-att-id="item.product_id" class="panel-collapse collapse">
                                    <div class="panel-body">

                                    </div>
                                </div>
                            <!--</t>-->
                        </div>
                    </t>

                    <t t-if="result.purchase_ok">
                        <div class="panel panel-warning">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <!--<input type="checkbox" name="chk_all" t-att-id="'chk'+result.product_id" class="chk_all"/>-->
                                    <a data-toggle="collapse" data-parent="#name" t-att-href="'#po'+result.product_id" class="click_po_a">
                                        <t t-if="po_length>0">
                                            <span class="fa fa-caret-right open-sign"></span>
                                        </t>
                                    </a>
                                    PO[<t t-esc="po_length"/>]
                                        <span class="show_bom_line_two">[需求:<t t-esc="result.require"/>,库存:<t t-esc="result.stock"/>,在产:<t t-esc="result.on_produce"/>,草稿:<t t-esc="result.draft"/>]</span>
                                    <!--<button class="btn btn-primary send-po-btn" t-att-check-name="'chk'+result.product_id">合并</button>-->
                                </h4>
                            </div>
                            <t t-if="po_length!=0">
                                <div t-att-id="'po'+result.product_id" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <t t-foreach="result.po_lines" t-as="item">
                                            <div class="panel panel-success">
                                                <div class="panel-heading">
                                                    <h4 class="panel-title">
                                                        <!--<input type="checkbox" t-att-name="'chk'+result.product_id" t-att-po-id="item.id"/>-->
                                                        <a data-toggle="collapse" data-parent="#name" t-att-href="'#po_detail'+item.line_id" class="click_po_detail_a" t-att-data-po-id="item.line_id">
                                                            <t t-if="item.origin!=false">
                                                                <span class="fa fa-caret-right open-sign po_details"></span>
                                                            </t>
                                                        </a>
                                                        <span class="show_po_number" t-att-data-id="item.id" style="cursor: pointer;"><t t-esc="item.name"/> </span>
                                                        <span style="margin-left:15px"><t t-esc="item.qty"/> </span>
                                                        <span style="margin-left:15px"><t t-esc="item.state"/> </span>
                                                        <span style="margin-left:15px"><t t-esc="item.date_planned"/> </span>
                                                    </h4>
                                                </div>
                                                <div class="panel-collapse collapse" t-att-id="'po_detail'+item.line_id">
                                                    <div class="panel-body">

                                                    </div>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </t>

                </div>
            </div>
        </div>
    </t>

    <t t-name="show_po_detail_add">
        <t t-foreach="result" t-as="item">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" t-att-mo-id="item.id" class="click_po_detail_a_add" data-parent="#name" t-att-href="'#mo_source'+item.id" t-att-data-product-id="item.product_id" t-att-data-origin="item.origin">
                            <t t-if="item.origin!=false">
                                <span class="fa fa-caret-right open-sign po_details"></span>
                            </t>
                        </a>
                        <span><t t-esc="item.name"/></span>
                        <span><t t-esc="item.product_qty"/></span>
                        <span><t t-esc="item.date"/></span>
                        <span><t t-esc="item.state"/></span>
                        <div class="panel-collapse collapse" t-att-id="'mo_detail'+item.id">
                            <div class="panel-body">

                            </div>
                        </div>
                    </h4>
                </div>
                <div class="panel-collapse collapse" t-att-id="'mo_source'+item.id">
                    <div class="panel-body">

                    </div>
                </div>
            </div>
        </t>
    </t>

    <t t-name="show_mo_detail_add">
        <t t-foreach="result" t-as="item">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" t-att-data-mo-id="item.product_id" t-att-data-more-mo="item.id" t-att-mo-id="item.id" class="click_mo_detail_a" data-parent="#name" t-att-href="'#mo_detail'+item.id"  t-att-data-origin="item.origin">
                            <t t-if="item.origin!=false">
                                <span class="fa fa-caret-right open-sign po_details"></span>
                            </t>
                        </a>
                        <span><t t-esc="item.name"/></span>
                        <span><t t-esc="item.product_qty"/></span>
                        <span><t t-esc="item.date"/></span>
                        <t t-if="item.partner_name">
                            <span><t t-esc="item.partner_name"/></span>
                        </t>

                    </h4>
                </div>
                <div class="panel-collapse collapse" t-att-id="'mo_detail'+item.id">
                    <div class="panel-body">

                    </div>
                </div>
            </div>
        </t>
    </t>

</templates>